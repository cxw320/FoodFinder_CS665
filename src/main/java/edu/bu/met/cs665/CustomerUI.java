package edu.bu.met.cs665;
import edu.bu.met.cs665.customerQuestions.AskCuisineType;
import edu.bu.met.cs665.customerQuestions.AskLocation;
import edu.bu.met.cs665.customerQuestions.AskPriceRange;
import edu.bu.met.cs665.customerQuestions.QuestionCommand;
import edu.bu.met.cs665.database.*;
import edu.bu.met.cs665.searchBuilder.FoodSearch;
import edu.bu.met.cs665.searchBuilder.SearchBuilder;

import java.util.ArrayList;

public class CustomerUI {

    private SearchBuilder searchBuilder;
    private ArrayList<QuestionCommand> customerQuestions;
    private FoodSearch foodSearch;
    private ArrayList<Restaurant> restaurantResults;

    public CustomerUI() {
        SearchBuilder newSearch = new SearchBuilder();
        this.searchBuilder = newSearch;

        AskLocation askLocation = new AskLocation(searchBuilder);
        AskCuisineType askCuisineType = new AskCuisineType(searchBuilder);
        AskPriceRange askPriceRange = new AskPriceRange(searchBuilder);
        customerQuestions = new ArrayList<QuestionCommand>();
        customerQuestions.add(askLocation);
        customerQuestions.add(askCuisineType);
        customerQuestions.add(askPriceRange);
    }

    public void takeCustomerOrder() throws Exception {

        for (QuestionCommand questionCommand : customerQuestions) {
            this.searchBuilder = questionCommand.execute();
        }
        foodSearch = searchBuilder.build();
      //  printSummary();
        ArrayList<Restaurant> results = searchRestaurants();
        printSearchResults(results);

    }
/*
    public void printSummary() {
        System.out.println("Your order is: " +
                foodSearch.getCuisineType() + " and your price range is " + foodSearch.getPriceRange());
    }*/

    public ArrayList<Restaurant> searchRestaurants() {

        Query restaurantQuery = new RestaurantQuery(foodSearch);
        QueryResults queryResults = restaurantQuery.executeQuery();
        ArrayList<Restaurant> restaurants = queryResults.getRestaurantResults();
        return restaurants;

    }

    public void printSearchResults(ArrayList<Restaurant> restaurants) {

        System.out.println("Restaurants that match your criteria can be found below:");
        for (Restaurant restaurant : restaurants) {
            System.out.println(restaurant.getName());
        }
    }
}




















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































